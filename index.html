<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESL Dictation Pro ðŸŽ§</title>

    <style>
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: #eef2f3;
            display: flex;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 14px;
            width: 100%;
            max-width: 650px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.12);
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 25px;
        }
        label {
            font-weight: bold;
            color: #34495e;
        }
        select, input[type="range"], button {
            width: 100%;
            padding: 12px;
            border-radius: 6px;
            border: 1px solid #ccc;
            margin-top: 6px;
            font-size: 1rem;
        }
        .btn {
            font-weight: bold;
            color: white;
            border: none;
            cursor: pointer;
        }
        .btn-play { background: #27ae60; }
        .btn-play:hover { background: #1f8a4d; }

        .btn-part { background: #8e44ad; margin-top: 10px; }
        .btn-part:hover { background: #732d91; }

        .btn-download { background: #3498db; margin-top: 10px; }
        .btn-download:hover { background: #217dbb; }

        .translation-box {
            margin-top: 20px;
            padding: 15px;
            background: #e8f4fd;
            border-left: 5px solid #3498db;
            display: none;
        }
        .lang-label {
            font-weight: bold;
            color: #2980b9;
            text-transform: uppercase;
            font-size: 0.8em;
        }
    </style>
</head>

<body>
<div class="container">

    <h1>ESL Dictation Pro ðŸŽ§</h1>

    <!-- Selector de temas -->
    <label>Selecciona un Tema:</label>
    <select id="topicSelector" onchange="resetView()"></select>

    <!-- Control de velocidad -->
    <label style="margin-top: 15px;">Velocidad del audio: <span id="speedVal">1.0x</span></label>
    <input type="range" id="speedRange" min="0.5" max="1.5" step="0.1" value="1"
           oninput="updateSpeed()">

    <!-- Reproductor de audio real -->
    <audio id="audioPlayer" controls style="width: 100%; margin-top: 20px;">
        <source src="gig economy.mp3" type="audio/mpeg">
    </audio>

    <!-- Botones -->
    <button class="btn btn-play" onclick="playFull()">â–¶ Reproducir todo</button>

    <button class="btn btn-part" onclick="playPart(0, 5)">â–¶ Parte 1 (0â€“5s)</button>
    <button class="btn btn-part" onclick="playPart(5, 12)">â–¶ Parte 2 (5â€“12s)</button>
    <button class="btn btn-part" onclick="playPart(12, 20)">â–¶ Parte 3 (12â€“20s)</button>

    <button class="btn btn-download" onclick="downloadAudio()">ðŸ“¥ Descargar MP3</button>

    <!-- Texto traducido -->
    <button class="btn" style="background:#34495e; margin-top:20px;" onclick="toggleTranslation()">
        Mostrar / Ocultar Texto
    </button>

    <div id="translationText" class="translation-box"></div>

</div>

<script>
    const lessons = [
        {
            title: "Gig Economy",
            english: "The gig economy is growing rapidly. Many workers now take short-term jobs instead of traditional full-time employment.",
            spanish: "La economÃ­a de trabajos temporales estÃ¡ creciendo rÃ¡pidamente. Muchos trabajadores ahora aceptan empleos de corta duraciÃ³n en lugar de trabajos tradicionales de tiempo completo."
        }
    ];

    const topicSelector = document.getElementById("topicSelector");
    const audio = document.getElementById("audioPlayer");

    lessons.forEach((lesson, i) => {
        let opt = document.createElement("option");
        opt.value = i;
        opt.textContent = lesson.title;
        topicSelector.appendChild(opt);
    });

    function updateSpeed() {
        const speed = document.getElementById("speedRange").value;
        document.getElementById("speedVal").innerText = speed + "x";
        audio.playbackRate = speed;
    }

    function playFull() {
        audio.currentTime = 0;
        audio.play();
    }

    function playPart(start, end) {
        audio.currentTime = start;
        audio.play();

        const interval = setInterval(() => {
            if (audio.currentTime >= end) {
                audio.pause();
                clearInterval(interval);
            }
        }, 100);
    }

    function downloadAudio() {
        const link = document.createElement("a");
        link.href = "gig economy.mp3";
        link.download = "gig_economy.mp3";
        link.click();
    }

    function toggleTranslation() {
        const box = document.getElementById("translationText");
        if (box.style.display === "block") {
            box.style.display = "none";
        } else {
            const lesson = lessons[topicSelector.value];
            box.innerHTML = `
                <span class="lang-label">InglÃ©s:</span><p>${lesson.english}</p>
                <hr>
                <span class="lang-label">EspaÃ±ol:</span><p>${lesson.spanish}</p>
            `;
            box.style.display = "block";
        }
    }

    function resetView() {
        document.getElementById("translationText").style.display = "none";
    }
</script>

</body>
</html>
